<div class="tag-add">
  <a class="float-right small" *ngIf="isEditing" (click)="tagReset(); isEditing = false">
    <i class="fa fa-remove"></i> Cancel
  </a>
  <h3>
    <ng-container *ngIf="isEditing"> <i class="fa fa-gear"></i> Update Existing Tag </ng-container>
    <ng-container *ngIf="!isEditing"> <i class="fa fa-plus"></i> Add New Tag </ng-container>
  </h3>
  <form [formGroup]="formTag">
    <table class="table mb-0">
      <thead class="small">
        <tr>
          <th style="width:25%;">Tag Name</th>
          <th>Background</th>
          <th>Text Color</th>
          <th style="width:20%;">Preview</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input class="form-control form-control-sm" formControlName="tagText" /></td>
          <td>
            <p-colorPicker formControlName="backgroundColor"></p-colorPicker>
          </td>
          <td>
            <p-colorPicker formControlName="textColor"></p-colorPicker>
          </td>
          <td>
            <div
              class="tag small"
              [style.background]="formTag.value.backgroundColor"
              [style.color]="formTag.value.textColor"
            >
              {{ formTag.value.tagText }}
            </div>
          </td>

          <td>
            <button
              *ngIf="!isEditing"
              pButton
              type="button"
              label="Create Tag"
              icon="fa fa-plus"
              (click)="tagAdd()"
              [disabled]="formTag.invalid"
            ></button>
            <button
              *ngIf="isEditing"
              pButton
              type="button"
              label="Update Tag"
              icon="fa fa-gear"
              (click)="tagAdd()"
              [disabled]="formTag.invalid"
            ></button>
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div>

<div class="nts-tags">
  <table class="table top" *ngIf="tags?.length; else notags">
    <thead>
      <tr>
        <th>Tag</th>
        <!--
        <th>Hotkey</th>
        <th>Global</th>
        -->
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let tag of tags; let i = index">
        <td>
          <div class="tag" [style.background]="tag.backgroundColor" [style.color]="tag.textColor">
            {{ tag.tagText }}
          </div>
        </td>
        <!--
        <td>
          <ng-container *ngIf="i < 10">
            {{ i + 1 }}
          </ng-container>
        </td>
        <td>
          <i class="fa fa-check" *ngIf="tag.globalTag"></i>
        </td>
        -->
        <td>
          <a (click)="tagEdit(tag)"><i class="fa fa-gear"></i> Edit</a>
        </td>
        <td>
          <a (click)="tagDelete(tag)"><i class="fa fa-remove"></i> Delete</a>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #notags>
    <div class="alert alert-info">
      <i class="fa fa-info-circle" aria-hidden="true"></i> No tags created, please create one below
    </div>
  </ng-template>
</div>
