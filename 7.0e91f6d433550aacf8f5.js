(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{EVaZ:function(t,e,n){"use strict";n.r(e),n.d(e,"NtsDocumentEditorModule",(function(){return j}));var i=n("Valr"),s=n("daQG"),o=n("slpd"),a=n("YjRe"),c=n("TYT/"),r=(n("Gi3i"),n("VnD/")),d=(n("0mNj"),n("xMyE"),n("26FU")),u=n("dzgT"),h=n("67Y/"),p=n("ad02"),f=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),s=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,s++)i[s]=o[a];return i},l=function(t,e){for(var n=[],i=0;i<t.numPages;i++)n.push({pdfSrcIndex:e,pageSrcIndex:i,excluded:!1,rotation:0,annotations:null});return n},g=function(){function t(t,e,n){var i=this;this.page=t,this._isRendered=!1,this._hasOffScreen=!1,this._width=e,this.canvas=document.createElement("canvas"),this.canvas.height=n,this.canvas.width=e,this._hasOffScreen&&(this._offscreenCanvas=this.canvas.transferControlToOffscreen()),this.page.then((function(t){return i._page=t}))}return t.prototype.render=function(t){var e=this;if(void 0===t&&(t=!1),!this._isRendered&&!t){var n=this._offscreenCanvas?this._offscreenCanvas:this.canvas;this._page?(this.viewCreate(this._page,n,this._width).promise.then(),this._isRendered=!0):this.page.then((function(t){e._page=t,e.viewCreate(e._page,n,e._width).promise.then(),e._isRendered=!0}))}},t.prototype.viewCreate=function(t,e,n){var i=t.getViewport({scale:1}),s=t.getViewport({scale:n/i.width});return t.render({canvasContext:e.getContext("2d"),viewport:s})},t}(),v=function(){return(v=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},_=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),s=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,s++)i[s]=o[a];return i},m=n("BkRI"),w=function(){function t(){var t=this;this._state={loadingScript:!0,loadingPdf:!0,pdfSrcs:null,pdfs:null,pageActive:{pdfIndex:0,pageIndex:0},tnSettings:{width:100,height:125},multipleAction:"merge",settings:{canRotate:!0,canRemove:!0,canSplit:!0,canReorder:!0,canSelect:!0},selection:[],docActive:0},this.state$=new d.a(this._state),this._documentsModelSrc=[],this._documentsModel=[],this.documentsModel$=new d.a(null),this._viewModels=[],this.viewModels$=new d.a(null),this.dragIndex={pdfIndex:0,pageIndex:0},Object(u.a)([this.state$.pipe(Object(h.a)((function(t){return t.pdfSrcs})),Object(r.a)((function(t){return null!==t})),Object(p.a)()),this.state$.pipe(Object(h.a)((function(t){return t.multipleAction})),Object(p.a)()),this.state$.pipe(Object(h.a)((function(t){return t.loadingScript})),Object(r.a)((function(t){return!t})),Object(p.a)())]).subscribe((function(e){return t.getDocument(e[0],e[1])})),Object(u.a)([this.state$.pipe(Object(h.a)((function(t){return t.pdfs})),Object(r.a)((function(t){return null!==t})),Object(p.a)()),this.state$.pipe(Object(h.a)((function(t){return t.tnSettings})),Object(r.a)((function(t){return null!==t})),Object(p.a)())]).subscribe((function(e){var n,i;e[0]&&e[1].width&&e[1].height&&(t._viewModels=(n=e[1].width,i=e[1].height,e[0].map((function(t){return function(t,e,n){for(var i=[],s=0;s<t.numPages;s++)i.push(new g(t.getPage(s+1),e,n));return i}(t,n,i)}))),t.viewModels$.next(t._viewModels))}))}return t.prototype.stateChange=function(t){this._state=Object.assign({},this._state,t),this.state$.next(this._state)},t.prototype.pageStateChange=function(t,e){var n=_(this._documentsModel);n[this._state.docActive].pages[t]=Object.assign({},n[this._state.docActive].pages[t],e),this._documentsModel=n,this.documentsModel$.next(this._documentsModel)},t.prototype.pageStateChangeAll=function(t,e){console.log(t,e)},t.prototype.pageSelectionChange=function(t,e){var n=_(this._state.selection);n[this._state.docActive].includes(t)&&!0!==e?n[this._state.docActive]=n[this._state.docActive].filter((function(e){return e!==t})).sort():n[this._state.docActive].includes(t)||(n[this._state.docActive]=_(n[this._state.docActive],[t]).sort()),this.stateChange({selection:n})},t.prototype.pageActiveChange=function(t){this.stateChange({pageActive:t})},t.prototype.pageReorder=function(t,e){for(var n=this,i=_(this._documentsModel),s=i[this._state.docActive].pages.filter((function(t,e){return!(!n._state.selection[n._state.docActive]||!n._state.selection[n._state.docActive].includes(e))})),o=i[this._state.docActive].pages.filter((function(t,e){return!n._state.selection[n._state.docActive]||!n._state.selection[n._state.docActive].includes(e)})),a=0,c=0;c<o.length;c++){var r=o[c];if(r.pdfSrcIndex===t.pdfSrcIndex&&r.pageSrcIndex===t.pageSrcIndex){a="left"===e?c:c+1;break}}a<0?a=0:a>i[this._state.docActive].pages.length&&(a=i[this._state.docActive].pages.length-1);var d,u,h,p,f=(d=o,u=a,h=s,p=Array.isArray(h)?h:[h],function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),s=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,c=o.length;a<c;a++,s++)i[s]=o[a];return i}(d.slice(0,u),p,d.slice(u)));i[this._state.docActive]=v(v({},i[this._state.docActive]),{pages:f}),this.stateChange({selection:this._state.selection.map((function(){return[]}))}),this._documentsModel=i,this.documentsModel$.next(this._documentsModel)},t.prototype.pageReset=function(){this._documentsModel=m(this._documentsModelSrc),this.documentsModel$.next(this._documentsModel)},t.prototype.tabChange=function(t,e){void 0===e&&(e=!0);var n={docActive:t.index,pageActive:{pdfIndex:t.index,pageIndex:0}};e&&(n.selection=this._state.selection.map((function(){return[]}))),this.stateChange(n)},t.prototype.scriptsLoad=function(t,e){var n=this;if(window.pdfjsLib)window.pdfjsLib.GlobalWorkerOptions.workerSrc=e,this.pdfJs=window.pdfjsLib,this.stateChange({loadingScript:!1});else{this.stateChange({loadingScript:!0});var i=document.createElement("script");i.type="text/javascript",i.src=t,i.onload=function(){window.pdfjsLib.GlobalWorkerOptions.workerSrc=e,n.pdfJs=window.pdfjsLib,n.stateChange({loadingScript:!1})},document.head.appendChild(i)}},t.prototype.getDocument=function(t,e){var n=this;if(this.pdfJs&&t){this.stateChange({loadingPdf:!0,pdfs:null});var i=t.map((function(t){var e=t;if(t instanceof Blob&&(e=URL.createObjectURL(t)),n.pdfJs)return n.pdfJs.getDocument(e).promise})).filter((function(t){return void 0!==t}));Promise.all(i).then((function(t){n.pdfs=t;var i=n.pdfs.map((function(t,e){return{label:"Document #"+(e+1),pages:l(t,e)}}));n._documentsModelSrc="merge"===e?function(t){return[t.reduce((function(t,e){return Object.assign({},t,e,{pages:f(t.pages,e.pages),label:"Document #1"})}))]}(i):i,n._documentsModel=m(n._documentsModelSrc),n.documentsModel$.next(n._documentsModel),n.stateChange({loadingPdf:!1,pdfs:n.pdfs,selection:n._documentsModelSrc.map((function(){return[]}))})}))}},t.prototype.destroy=function(){this.state$.complete()},t.\u0275prov=c["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac=function(e){return new(e||t)}}),t}(),b=n("+QCI");n("XC3M");var j=function(){function t(){}return t.\u0275mod=c["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[w],imports:[[i.c,s.c,o.c,a.b,b.b]]}),t}()}}]);